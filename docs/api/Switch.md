# ğŸ§© Switch API

The **Switch API** describes props, internal rendering mechanics, effect system, and toggle logic for the Switch component.

---

# ğŸ“¦ Import

### TSX
```tsx
import { Switch } from './Switch'
```

### Web Component
```ts
import './Switch'   // registers <wui-switch>
```

---

# ğŸ§­ Props Overview

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| **effect** | string | `""` | Name of animation/effect (ios, flat, effect1â€¦effect18) |
| **checked** | boolean or Observable<boolean> | `false` | Toggle state |
| **on** | string | `"ON"` | Text label when ON |
| **off** | string | `"OFF"` | Text label when OFF |
| **id** | string | autogenerated | DOM id used by the label |
| **cls** | string | `""` | Additional classes for the switch wrapper |
| **children** | JSX.Child | `null` | Currently unused, reserved for future |
| **...otherProps** | HTMLAttributes\<div> | â€” | Props applied to outer `<div>` |

---

# âš™ï¸ Internal Rendering Structure

Switch renders:

```tsx
<div class="[effectClass] [cls]">
    <input
        id={id}
        type="checkbox"
        checked={checked}
        onChange={v => isObservable(checked) && checked(v.target.checked)}
    />

    <div data-tg-on={on} data-tg-off={off}>
        <span data-tg-on={on} data-tg-off={off}></span>
    </div>

    <span></span>

    <label for={id} data-tg-on={on} data-tg-off={off}></label>
</div>
```

Meaning:

- `<input>` holds the real boolean state  
- `<label>` toggles the input  
- Wrapper `<div>` hosts animated effect classes  
- `data-tg-on` / `data-tg-off` feed text labels into effects  

---

# ğŸ¨ Effect Class Resolution

All effects are stored in a lookup table:

```ts
const styleMap = {
    ios, flat, skewed, flip, light,
    effect1, effect2, effect3, effect4, effect5, effect6,
    ...
    effect18
}
```

The active style is computed with:

```ts
activeStyle = styleMap[effect] || ""
```

---

# ğŸ”„ Toggle Behavior

Switch toggles when:

- Clicking the `<label>`
- Clicking the switch container
- Programmatically updating `checked`

Observable-compatible logic:

```ts
onChange={e =>
    isObservable(checked) && checked(e.target.checked)
}
```

---

# ğŸ”¢ ID Generation

Each Switch generates its own ID:

```ts
const generatedId = nanoid(8)
```

This ensures `<label for="â€¦">` always works properly.

---

# ğŸ§ª Usage Examples

### TSX
```tsx
<Switch effect="effect5" checked={$(false)} />
```

### HTML
```html
<wui-switch effect="effect5" checked="true"></wui-switch>
```

### With text labels
```tsx
<Switch on="YES" off="NO" />
```

---

# â™¿ Accessibility

- Uses `<input type="checkbox">` for native semantics  
- `<label for="id">` ensures toggle works when clicking the label  
- Observable `checked` supports controlled + uncontrolled usage  
- Effects are visual-only; do not affect accessibility  

---

# ğŸ“ Summary

Switch provides:

- 18 effect animations + 5 style presets  
- Smooth toggle interaction  
- Observable-friendly checked state  
- Accessible input/label structure  
- Fully customizable styling  
- TSX + Web Component support  